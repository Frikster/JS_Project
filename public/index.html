<html>
  <head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="shortcut icon" href="assets/images/favicon.ico">
    <script type="text/javascript" src="./vendor/bundle.js"></script>
    <script type="text/javascript" src="./vendor/libgif.js"></script>
    <title>PokeRoyale</title>
  </head>

  <body>
    <!-- <div>
      <p>
        dsfffffffffffffffffffffffffffdfg

      </p>
    </div> -->

    <div class='game-div'>
      <div>
        <img src="./assets/images/PokeRoyaleTitle.png" id='game-title'>
      </div>

      <div class="instructions-and-info">
        <div class="instructions">
          <h2>Instructions</h2>
          <ul>
            <li>Use the arrow keys, w,a,s,d or the scroll on a laptop touchpad to move around the map</li>
            <li>Drag a Pokemon and drop it onto the map. Wait for it to spawn. It will phase in and out of existence, don't worry about it.</li>
            <li>Left-click to select a Pokemon</li>
            <li>Left-click and drag to make a box to select a group of Pokemon</li>
            <li>Left-click the map to deselect</li>
            <li>Right-click to order selected Pokemon to move</li>
            <li>Press the delete key to remove selected Pokemon</li>
            <li>Find a gif you like on the internet representing yourself and <br> add the url below</li>
            <li>Navigate to the top-left of the map to find the gif you added</li>
            <li>Enjoy seeing an animated version of yourself among your favourite Pokemon</li>
          </ul>
          
        </div>

        <div class="info">
          <!-- <div class='github-icon'></div> -->
          <h2>Info</h2>
            <br>
            The normal way to get a sprite to animate on a HTML5 Canvas is to manually create a spritesheet and then run your frames from there.
            This is fine for small-scale projects but I wasn't overly keen on doing this manually for 1000+ Pokemon...
            Gifs for each Pokemon are easily obtainable. Why cant I just use gifs directly on my canvas? 
            If I can get it to work so that a gif is served from any arbitrary gif on the internet then people can also create their own Pokemon!
            Turns out HTML5 Canvas does not support gifs at all.
            And so what started as a cute little Pokemon game became many all-nighters learning how to parse gifs from raw binary streams.
            The end result is here a framework that anyone can use to get their own project off the ground with gifs served to a canvas.
            And as far as I know this is the first such framework to exist! Enjoy!

            Oh! Also as an added bonus the sprites have collision detection. Try making them collide!
          <i class="fab fa-github"></i>
        </div>
      </div>

      <div id='viewport'>
        <canvas id='canvas-map'></canvas>
      </div>

    <!-- <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br> -->
      
      <form id='custom-gif-input'>
        Front gif: <input type="text" name="front" value="Insert Gif URL">
        Back gif: <input type="text" name="back" value="Insert Gif URL">
        <!-- Scale: <input type="number" step="0.1" min="0.1" max="1" name='scale' value="1"> -->
        <input type="submit" value="Submit">
      </form>
    </div>
    <div id='spritesheets'>

    </div>
    <!-- <img id="charmander" src="https://sprites.pokecheck.org/i/004.gif" rel:animated_src="https://sprites.pokecheck.org/i/004.gif" /> -->
    <!-- <img id="charmeleon" src="https://sprites.pokecheck.org/i/005.gif" rel:animated_src="https://sprites.pokecheck.org/i/005.gif" />
    <img id="charizard" src="https://sprites.pokecheck.org/i/006.gif" rel:animated_src="https://sprites.pokecheck.org/i/006.gif" /> -->
    <!-- <img id="char" src="https://sprites.pokecheck.org/bw/i/494.gif" rel:animated_src="https://sprites.pokecheck.org/bw/i/494.gif" /> -->
    <script type="text/javascript">
      // debugger
      // let image = new Image();
      // image.setAttribute('rel:animated_src' , "https://sprites.pokecheck.org/i/004.gif")
      // image.src = "https://sprites.pokecheck.org/i/004.gif";

      // // let charmander = new SuperGif({ gif: image, auto_play: false } );
     
     
      // let char = new SuperGif({ gif: document.getElementById('char'), auto_play: false });
      // const play = (res) => {
      //   char.play();
      //   for(let i = 1; i < char.get_length(); i++){
      //     let offset = {x: 0, y: i * 62};
      //     char.set_frame_offset(i, offset);
      //   }
      //   char.set_sizes(53, char.get_length()*62);
      //   let dataURL = char.get_canvas().toDataURL();
      // }
      // char.load(play);


      
        // let dataURL = char.get_canvas().toDataURL("image/png").replace("image/png", "image/octet-stream");
        
        // Opens download file window...
        // window.location.href = dataURL;
        
        
        // // set canvasImg image src to dataURL
        // // so it can be saved as an image
        // document.getElementById('canvasImg').src = dataURL;
        // $.ajax({
        //   type: "POST",
        //   url: "http://localhost/test.php",
        //   data: {
        //     imgBase64: dataURL
        //   }
        // }).done(function (response) {
        //   console.log('saved: ' + response);
        // });
      
      // char.load(play);

      // let gif = document.getElementById('charmander');
      // let callback = () => {console.log("WhatUp")};
      // let src = gif.getAttribute('rel:animated_src')
      // // charmander.load_url(src, callback)

      // // var h = new XMLHttpRequest();
      // // h.open('GET', src, true);
      // // h.onload = function (e) {
      // //   let data = this.response;
      // //   this.response


      // //   debugger
      // // }
      // // h.send();
      // // debugger

      // // // let charmeleon = new SuperGif({ gif: document.getElementById('charmeleon'), auto_play: false });
      // // // let charizard = new SuperGif({ gif: document.getElementById('charizard'), auto_play: false });
      
  		// // // c_w, c_h - width and height of canvas
      // // // vp_t, vp_l, vp_ w, vp_h - top, left, width and height of the viewport

      // const play = (res) => {
      //   charmander.play();
      //   debugger
      // } 

      // charmander.load(play);

      // charmeleon.load(res => play(res));
      // charizard.load(res => play(res));
    </script>

    <script type="application/javascript" src="vendor/keymaster.js"></script>
    <script type="application/javascript" src="bundle.js"></script>
  </body>
</html>
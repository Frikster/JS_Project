<html>
  <head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="shortcut icon" href="assets/images/favicon.ico">
    <script type="text/javascript" src="./vendor/libgif.js"></script>
    <title>PokeRoyale</title>
  </head>

  <body>
    <div class='map'>
      <canvas></canvas>
    </div>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <div id='spritesheets'>

    </div>
    <!-- <img id="charmander" src="https://sprites.pokecheck.org/i/004.gif" rel:animated_src="https://sprites.pokecheck.org/i/004.gif" /> -->
    <!-- <img id="charmeleon" src="https://sprites.pokecheck.org/i/005.gif" rel:animated_src="https://sprites.pokecheck.org/i/005.gif" />
    <img id="charizard" src="https://sprites.pokecheck.org/i/006.gif" rel:animated_src="https://sprites.pokecheck.org/i/006.gif" /> -->
    <img id="char" src="https://sprites.pokecheck.org/bw/i/494.gif" rel:animated_src="https://sprites.pokecheck.org/bw/i/494.gif" />
    <script type="text/javascript">
      // debugger
      // let image = new Image();
      // image.setAttribute('rel:animated_src' , "https://sprites.pokecheck.org/i/004.gif")
      // image.src = "https://sprites.pokecheck.org/i/004.gif";

      // // let charmander = new SuperGif({ gif: image, auto_play: false } );
     
     
      let char = new SuperGif({ gif: document.getElementById('char'), auto_play: false });
      const play = (res) => {
        char.play();
        for(let i = 1; i < char.get_length(); i++){
          let offset = {x: 0, y: i * 62};
          char.set_frame_offset(i, offset);
        }
        char.set_sizes(53, char.get_length()*62);
        let dataURL = char.get_canvas().toDataURL();
      }
      // char.load(play);


      
        // let dataURL = char.get_canvas().toDataURL("image/png").replace("image/png", "image/octet-stream");
        
        // Opens download file window...
        // window.location.href = dataURL;
        
        
        // // set canvasImg image src to dataURL
        // // so it can be saved as an image
        // document.getElementById('canvasImg').src = dataURL;
        // $.ajax({
        //   type: "POST",
        //   url: "http://localhost/test.php",
        //   data: {
        //     imgBase64: dataURL
        //   }
        // }).done(function (response) {
        //   console.log('saved: ' + response);
        // });
      
      // char.load(play);

      // let gif = document.getElementById('charmander');
      // let callback = () => {console.log("WhatUp")};
      // let src = gif.getAttribute('rel:animated_src')
      // // charmander.load_url(src, callback)

      // // var h = new XMLHttpRequest();
      // // h.open('GET', src, true);
      // // h.onload = function (e) {
      // //   let data = this.response;
      // //   this.response


      // //   debugger
      // // }
      // // h.send();
      // // debugger

      // // // let charmeleon = new SuperGif({ gif: document.getElementById('charmeleon'), auto_play: false });
      // // // let charizard = new SuperGif({ gif: document.getElementById('charizard'), auto_play: false });
      
  		// // // c_w, c_h - width and height of canvas
      // // // vp_t, vp_l, vp_ w, vp_h - top, left, width and height of the viewport

      // const play = (res) => {
      //   charmander.play();
      //   debugger
      // } 

      // charmander.load(play);

      // charmeleon.load(res => play(res));
      // charizard.load(res => play(res));
    </script>

    <script type="application/javascript" src="vendor/keymaster.js"></script>
    <script type="application/javascript" src="lib/bundle.js"></script>
  </body>
</html>